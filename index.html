---
layout: default
---

{% include about.md %}

<strong>filter:</strong>

{% assign sorted_categories = site.categories | sort %}

<span id="categories">
{% for category in sorted_categories | sort %}
  <a class="disabled">{{ category | first }}</a>
{% endfor %}
</span>

<h1>Posts</h1>

{% for post in site.posts %}

  {% assign sorted_categories = post.categories | sort %}

  <p data-category="{{ sorted_categories | join: ' ' }}" class="post">
    <a class="post-link" href="{{ post.url | prepend: site.baseurl }}">{{ post.title }}</a>
    <br />
    <span class="post-meta">{{ post.date | date: "%Y-%m-%d" }}</span>
    <em>
      | {{ sorted_categories | join: ' | ' }}
    </em>
  </p>

{% endfor %}

<style>
  #categories * {
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
  }
  #categories a {
    cursor: pointer;
  }
  #categories a.disabled {
    opacity: 0.25;
  }
  .hidden {
    display: none;
  }
</style>

<script>
  var category_buttons = document.querySelectorAll('#categories a');
  var posts = document.querySelectorAll('.post');
  var categories_selected = [];

  function checkForCategory(post_cat, cat_sel) {
    var found = false;

    post_cat.forEach(function(pcat) {
      cat_sel.forEach(function(scat) {
        if (pcat === scat)
          found = true;
      });
    });

    return found;
  }

  function postShowHide(scat) {
    var post_categories;

    posts.forEach(function(post) {
      post_categories = post.getAttribute('data-category');
      post_categories = post_categories.split(' ');
      post.classList.remove('hidden');

      if (!checkForCategory(post_categories, scat))
        post.classList.add('hidden');
    });
  }

  function categorySelect(selected, buttons) {
    buttons.forEach(function(but) {
      if (but.innerHTML === selected) {
        if (but.classList[0]==='disabled')
          but.classList.remove('disabled');
        else
          but.classList.add('disabled');
      }
    });

    categories_selected = [];

    category_buttons.forEach(function(cat) {
      if (cat.classList.value !== 'disabled')
        categories_selected.push(cat.innerHTML);
    });

    postShowHide(categories_selected);
  }

  category_buttons.forEach(function(cat_but) {
    cat_but.addEventListener('click', function(e) {
      categorySelect(e.target.innerHTML, category_buttons);
    });
  });

  categorySelect(['2016'], category_buttons);

/*
    category_button.addEventListener('click', function(e) {
      var category = e.target.innerHTML;
      var posts = document.querySelectorAll('[data-category~='+category+']');

      if (e.target.classList.value === 'disabled') {
        e.target.classList.remove('disabled');
        posts.forEach(function(post) {
          post.classList.remove('hidden');
        });
      }
      else {
        e.target.classList.add('disabled');
        posts.forEach(function(post) {
          if (!post.getAttribute('data-category').replace(category, '').replace(' ', ''))
            post.classList.add('hidden');
        });
      }

    });*/


</script>

<p class="rss-subscribe">subscribe <a href="{{ "/feed.xml" | prepend: site.baseurl }}">via RSS</a></p>
